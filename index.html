<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offre Exclusive - Protocole de Synchronisation Neuro-Hormonale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- C√≥digo de otimiza√ß√£o VTurb -->
    <script>!function(i,n){i._plt=i._plt||(n&&n.timeOrigin?n.timeOrigin+n.now():Date.now())}(window,performance);</script>
    <link rel="preload" href="https://scripts.converteai.net/4afc0b7e-daca-4f19-88ca-c12a454a2d1e/players/68a4e1c5c31744b04d6f9d4c/v4/player.js" as="script">
    <link rel="preload" href="https://scripts.converteai.net/lib/js/smartplayer-wc/v4/smartplayer.js" as="script">
    <link rel="preload" href="https://cdn.converteai.net/4afc0b7e-daca-4f19-88ca-c12a454a2d1e/68a4e0cacaaf2808dd7bacf3/main.m3u8" as="fetch">
    <link rel="dns-prefetch" href="https://cdn.converteai.net">
    <link rel="dns-prefetch" href="https://scripts.converteai.net">
    <link rel="dns-prefetch" href="https://images.converteai.net">
    <link rel="dns-prefetch" href="https://api.vturb.com.br">
    
    <style>
        body {
            background: linear-gradient(135deg, #111827 0%, #1f2937 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        #hotmart-widget-container {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .decline-link {
            transition: all 0.3s ease;
        }
        
        .decline-link:hover {
            opacity: 0.8;
            text-decoration: underline;
        }
        
        /* Custom styles for the video container */
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            width: 100%;
            margin: 0 auto 2rem auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            background: #1f2937;
        }
        
        .video-container vturb-smartplayer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .video-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        /* Responsive video sizing */
        @media (max-width: 640px) {
            .video-wrapper {
                padding: 0 0.75rem;
            }
            
            .video-container {
                margin-bottom: 1.5rem;
                border-radius: 8px;
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
            }
            
            .video-container vturb-smartplayer {
                border-radius: 8px;
            }
        }
        
        @media (min-width: 641px) and (max-width: 1024px) {
            .video-wrapper {
                max-width: 900px;
                padding: 0 1.5rem;
            }
        }
        
        /* Widget Hotmart responsive styles */
        .widget-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .widget-container {
            width: 100%;
            margin: 0 auto 2rem auto;
            padding: 1.5rem;
            background: linear-gradient(145deg, #374151 0%, #1f2937 100%);
            border-radius: 12px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Responsive widget sizing */
        @media (max-width: 640px) {
            .widget-wrapper {
                padding: 0 0.75rem;
            }
            
            .widget-container {
                padding: 1rem;
                border-radius: 8px;
                margin-bottom: 1.5rem;
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
            }
        }
        
        @media (min-width: 641px) and (max-width: 1024px) {
            .widget-wrapper {
                max-width: 900px;
                padding: 0 1.5rem;
            }
            
            .widget-container {
                padding: 1.25rem;
            }
        }
        
        @media (min-width: 1025px) {
            .widget-wrapper {
                max-width: 1000px;
                padding: 0 2rem;
            }
            
            .widget-container {
                padding: 2rem;
                margin-bottom: 3rem;
            }
        }
    </style>
</head>
<body class="font-sans text-gray-100">
    <div class="container mx-auto px-4 py-8 md:py-12">
        <!-- √âL√âMENT 1 : Le Titre d'Interruption -->
        <h1 class="text-center text-2xl md:text-3xl lg:text-4xl font-bold mb-6 md:mb-10 tracking-tight">
            ATTENDEZ ! Votre commande est presque compl√®te...
        </h1>
        
        <!-- √âL√âMENT 2 : Le Lecteur Vid√©o Vturb -->
        <div class="mb-8 md:mb-12">
            <div class="video-wrapper">
                <div class="video-container">
                    <vturb-smartplayer id="vid-68a4e1c5c31744b04d6f9d4c" style="display: block; margin: 0 auto; width: 100%;"></vturb-smartplayer>
                    <script type="text/javascript">
                        var s=document.createElement("script");
                        s.src="https://scripts.converteai.net/4afc0b7e-daca-4f19-88ca-c12a454a2d1e/players/68a4e1c5c31744b04d6f9d4c/v4/player.js";
                        s.async=!0;
                        document.head.appendChild(s);
                    </script>
                </div>
            </div>
        </div>
        
        <!-- √âL√âMENT 3 : Le Widget d'Upsell de Hotmart -->
        <div id="hotmart-widget-container" style="display: none;">
            <div class="widget-wrapper">
                <div class="widget-container">
                    <!-- HOTMART - Sales Funnel Widget -->
                    <div id="hotmart-sales-funnel" style="min-height: 400px; background: rgba(243, 244, 246, 0.05); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                        <div style="text-align: center; color: #9ca3af;">
                            <div style="margin-bottom: 10px; font-size: 24px;">üîÑ</div>
                            <div>Carregando widget da Hotmart...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Script separado para Hotmart -->
        <script>
            // Carregar script da Hotmart de forma ass√≠ncrona
            function loadHotmartWidget() {
                const script = document.createElement('script');
                script.src = 'https://checkout.hotmart.com/lib/hotmart-checkout-elements.js';
                script.onload = function() {
                    console.log('Script Hotmart carregado!');
                    try {
                        if (window.checkoutElements) {
                            checkoutElements.init('salesFunnel').mount('#hotmart-sales-funnel');
                            console.log('Widget Hotmart montado com sucesso!');
                        }
                    } catch (e) {
                        console.error('Erro ao montar widget Hotmart:', e);
                    }
                };
                script.onerror = function() {
                    console.error('Erro ao carregar script da Hotmart');
                    document.getElementById('hotmart-sales-funnel').innerHTML = 
                        '<div style="text-align: center; color: #ef4444; padding: 20px;">‚ùå Erro ao carregar widget da Hotmart</div>';
                };
                document.head.appendChild(script);
            }
            
            // Carregar widget quando a p√°gina estiver pronta
            document.addEventListener('DOMContentLoaded', loadHotmartWidget);
        </script>
        
        <!-- √âL√âMENT 4 : Le Lien de Refus -->
        <div class="text-center">
            <a href="https://bienvenue.elanvital.site" 
               class="decline-link text-sm md:text-base text-gray-400 hover:text-gray-300">
                Non, merci. Je refuse cette offre exclusive et je comprends que je ne la reverrai plus.
            </a>
        </div>
    </div>

    <script>
        // Fun√ß√£o para mostrar o widget da Hotmart
        function showHotmartWidget() {
            const container = document.getElementById('hotmart-widget-container');
            if (container) {
                container.style.display = 'block';
                
                // Scroll suave at√© o widget
                container.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
                
                console.log('üéØ Widget Hotmart exibido aos 4:12!');
            }
        }

        // Aguardar o player VTurb carregar completamente
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üì± P√°gina carregada - configurando monitoramento do v√≠deo...');
            
            // Fun√ß√£o que monitora o tempo do v√≠deo - VERS√ÉO ATUALIZADA
            function setupVideoTimeListener() {
                const player = document.getElementById('vid-68a4e1c5c31744b04d6f9d4c');
                console.log('üîç Procurando player VTurb...', player);
                
                if (player) {
                    // Verificar diferentes APIs do VTurb
                    console.log('üîß Verificando APIs dispon√≠veis...', {
                        smart_player: !!player.smart_player,
                        player: !!player.player,
                        smartPlayer: !!player.smartPlayer,
                        _player: !!player._player
                    });
                    
                    // Tentar diferentes formas de acessar o player
                    let vPlayer = player.smart_player || player.player || player.smartPlayer || player._player;
                    
                    if (vPlayer) {
                        console.log('‚úÖ Player VTurb encontrado!', vPlayer);
                        
                        // Tentar diferentes eventos de tempo
                        const timeEvents = ['timeupdate', 'time', 'currentTimeChanged', 'progress'];
                        
                        timeEvents.forEach(eventName => {
                            try {
                                vPlayer.on(eventName, function(currentTime) {
                                    // Debug: mostrar tempo a cada 30 segundos
                                    if (Math.floor(currentTime) % 30 === 0) {
                                        console.log('‚è±Ô∏è Tempo do v√≠deo:', Math.floor(currentTime) + 's');
                                    }
                                    
                                    // 4 minutos e 12 segundos = 252 segundos
                                    if (Math.floor(currentTime) === 252) {
                                        showHotmartWidget();
                                    }
                                });
                                console.log('üé¨ Evento', eventName, 'configurado com sucesso!');
                            } catch (e) {
                                console.log('‚ö†Ô∏è Evento', eventName, 'n√£o funcionou:', e.message);
                            }
                        });
                    } else {
                        console.log('‚ö†Ô∏è Player ainda n√£o dispon√≠vel, tentando novamente...');
                        setTimeout(setupVideoTimeListener, 1000);
                    }
                } else {
                    console.log('‚ö†Ô∏è Elemento player n√£o encontrado, tentando novamente...');
                    setTimeout(setupVideoTimeListener, 1000);
                }
            }
            
            // Iniciar o monitoramento com delay maior
            setTimeout(setupVideoTimeListener, 2000);
            
            // PLANO B: Monitoramento via polling a cada segundo
            let pollingActive = true;
            setTimeout(() => {
                console.log('üîÑ Iniciando monitoramento por polling como backup...');
                
                setInterval(() => {
                    if (!pollingActive) return;
                    
                    const player = document.getElementById('vid-68a4e1c5c31744b04d6f9d4c');
                    if (player) {
                        // Tentar acessar o tempo de diferentes formas
                        let currentTime = null;
                        
                        try {
                            if (player.smart_player && player.smart_player.currentTime) {
                                currentTime = player.smart_player.currentTime;
                            } else if (player.currentTime) {
                                currentTime = player.currentTime;
                            } else if (player.querySelector && player.querySelector('video')) {
                                const video = player.querySelector('video');
                                currentTime = video.currentTime;
                            }
                            
                            if (currentTime !== null) {
                                // Debug: mostrar tempo a cada 30 segundos
                                if (Math.floor(currentTime) % 30 === 0 && Math.floor(currentTime) > 0) {
                                    console.log('üïí [Polling] Tempo do v√≠deo:', Math.floor(currentTime) + 's');
                                }
                                
                                // 4 minutos e 12 segundos = 252 segundos
                                if (Math.floor(currentTime) >= 252 && Math.floor(currentTime) <= 254) {
                                    showHotmartWidget();
                                    pollingActive = false; // Parar polling
                                }
                            }
                        } catch (e) {
                            // Silencioso
                        }
                    }
                }, 1000);
            }, 5000);
        });
    </script>
</body>
</html>
